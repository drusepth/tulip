<%= turbo_stream.replace dom_id(@comment) do %>
  <%= turbo_frame_tag dom_id(@comment) do %>
    <div class="comment p-4 rounded-2xl bg-rose-light border border-rose">
      <div class="mb-3 p-2 rounded-lg bg-white text-rose-dark text-sm">
        <div class="flex items-center gap-2">
          <svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          <span><%= @comment.errors.full_messages.join(", ") %></span>
        </div>
      </div>
      <%= form_with model: [@comment.stay, @comment], class: "space-y-3" do |f| %>
        <div class="flex gap-3">
          <%= avatar_tag(@comment.user, size: 32, html_options: {
            class: "w-8 h-8 ring-2 ring-rose flex-shrink-0"
          }) %>
          <div class="flex-1">
            <label class="text-xs text-rose-dark mb-1 block">Edit your comment</label>
            <%= f.text_area :body,
                            rows: 3,
                            class: "w-full px-3 py-2 border border-rose rounded-xl bg-white text-brown text-sm focus:outline-none focus:border-rose-dark resize-none",
                            autofocus: true %>
          </div>
        </div>

        <div class="flex gap-2 justify-end">
          <%= link_to "Cancel",
                      stay_path(@comment.stay),
                      class: "text-sm text-brown-light hover:text-brown px-3 py-1.5 transition-colors",
                      data: { turbo_stream: true } %>
          <%= f.submit "Save", class: "btn-primary text-sm py-1.5 px-4 bg-lavender hover:bg-lavender-dark" %>
        </div>
      <% end %>
    </div>
  <% end %>
<% end %>
